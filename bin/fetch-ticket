#!/usr/bin/env python2

import json
import re
import sys
from ticket import Ticket

def main(ticket_id):
    p = ticket_id[:ticket_id.find('-')]
    t = Ticket(prod=True, project=p, ticket_id=ticket_id)
    print json.dumps(t.content)

if __name__ == '__main__':
    if len(sys.argv) < 2:
        print 'Please provide ticket ID as argument (e.g. PROJ-1234)'
        sys.exit(1)
    tid = sys.argv[1]
    if not re.match(r'[A-Z]+-\d+', tid):
        print '%s is not a valid ticket ID' % tid
        sys.exit(1)
    main(tid)
