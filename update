#!/bin/bash

echo Updating local file system from repo...

set -o verbose

OLDDIR=$(pwd)
DIR=$(dirname $0)

# git config
ln -s $DIR/git/gitignore_core ~/.gitignore_core
git config --global core.excludesfile '~/.gitignore_core'
ln -s $DIR/git/git_template ~/.git_template
git config --global init.templatedir '~/.git_template'

# vim config
git submodule init
git submodule update

ln -s $DIR/vim ~/.vim
ln -s $DIR/vim/vimrc ~/.vimrc

# emacs config
ln -s $DIR/spacemacs ~/.spacemacs.d
git clone https://github.com/syl20bnr/spacemacs.git ~/.emacs.d

# weechat config
ln -s $DIR/weechat ~/.weechat

# xorg config
ln -s $DIR/xorg/.Xdefaults ~/.Xdefaults
ln -s $DIR/xorg/.xinitrc ~/.xinitrc

# awesome wm config
ln -s $DIR/awesome ~/.config/awesome

# zsh config
ln -s $DIR/zsh/zlogin ~/.zlogin
ln -s $DIR/zsh/zshenv ~/.zshenv
ln -s $DIR/zsh/zshrc ~/.zshrc

# note that there's probably a more robust way to do this 
# e.g. this will break if the path of $AWESOME_LOG_FILE changes
mkdir -p ~/.cache/awesome
touch ~/.cache/awesome/awesome.log

touch ~/.watched_packages

set +o verbose

echo Done!
echo You will probably need to edit ~/.xinitrc, ~/.zshrc, and ~/.config/awesome/rc.lua
